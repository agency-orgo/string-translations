const H=window.Vue,{BaseTransition:de,BaseTransitionPropsValidators:ue,Comment:ce,DeprecationTypes:pe,EffectScope:me,ErrorCodes:ge,ErrorTypeStrings:ve,Fragment:_,KeepAlive:fe,ReactiveEffect:ye,Static:Ce,Suspense:Se,Teleport:be,Text:he,TrackOpTypes:ke,Transition:Te,TransitionGroup:we,TriggerOpTypes:xe,VueElement:Pe,__esModule:Re,assertNumber:De,callWithAsyncErrorHandling:Le,callWithErrorHandling:Ae,camelize:Ve,capitalize:Ee,cloneVNode:Me,compatUtils:Ie,compile:Fe,computed:b,createApp:He,createBlock:c,createCommentVNode:D,createElementBlock:h,createElementVNode:u,createHydrationRenderer:_e,createPropsRestProxy:ze,createRenderer:Be,createSSRApp:Ue,createSlots:Ne,createStaticVNode:Oe,createTextVNode:p,createVNode:l,customRef:Ge,defineAsyncComponent:Ke,defineComponent:$e,defineCustomElement:qe,defineEmits:je,defineExpose:We,defineModel:Qe,defineOptions:Ye,defineProps:Je,defineSSRCustomElement:Xe,defineSlots:Ze,devtools:et,effect:tt,effectScope:ot,getCurrentInstance:at,getCurrentScope:nt,getCurrentWatcher:rt,getTransitionRawChildren:lt,guardReactiveProps:st,h:it,handleError:dt,hasInjectionContext:ut,hydrate:ct,hydrateOnIdle:pt,hydrateOnInteraction:mt,hydrateOnMediaQuery:gt,hydrateOnVisible:vt,initCustomFormatter:ft,initDirectivesForSSR:yt,inject:Ct,isMemoSame:St,isProxy:bt,isReactive:ht,isReadonly:kt,isRef:Tt,isRuntimeOnly:wt,isShallow:xt,isVNode:Pt,markRaw:Rt,mergeDefaults:Dt,mergeModels:Lt,mergeProps:At,nextTick:Vt,nodeOps:Et,normalizeClass:z,normalizeProps:Mt,normalizeStyle:It,onActivated:Ft,onBeforeMount:Ht,onBeforeUnmount:_t,onBeforeUpdate:zt,onDeactivated:Bt,onErrorCaptured:Ut,onMounted:B,onRenderTracked:Nt,onRenderTriggered:Ot,onScopeDispose:Gt,onServerPrefetch:Kt,onUnmounted:U,onUpdated:$t,onWatcherCleanup:qt,openBlock:i,patchProp:jt,popScopeId:Wt,provide:Qt,proxyRefs:Yt,pushScopeId:Jt,queuePostFlushCb:Xt,reactive:N,readonly:Zt,ref:v,registerRuntimeCompiler:eo,render:to,renderList:O,renderSlot:oo,resolveComponent:ao,resolveDirective:no,resolveDynamicComponent:ro,resolveFilter:lo,resolveTransitionHooks:so,setBlockTracking:io,setDevtoolsHook:uo,setTransitionHooks:co,shallowReactive:po,shallowReadonly:mo,shallowRef:go,ssrContextKey:vo,ssrUtils:fo,stop:yo,toDisplayString:L,toHandlerKey:Co,toHandlers:So,toRaw:bo,toRef:ho,toRefs:ko,toValue:To,transformVNodeArgs:wo,triggerRef:xo,unref:o,useAttrs:Po,useCssModule:Ro,useCssVars:Do,useHost:Lo,useId:Ao,useModel:Vo,useSSRContext:Eo,useShadowRoot:Mo,useSlots:Io,useTemplateRef:Fo,useTransitionState:Ho,vModelCheckbox:_o,vModelDynamic:zo,vModelRadio:Bo,vModelSelect:Uo,vModelText:No,vShow:Oo,version:Go,warn:Ko,watch:$o,watchEffect:qo,watchPostEffect:jo,watchSyncEffect:Wo,withAsyncContext:Qo,withCtx:r,withDefaults:Yo,withDirectives:Jo,withKeys:Xo,withMemo:Zo,withModifiers:ea,withScopeId:ta}=H,{Form:oa,Head:G,Link:aa,router:A,toggleArchitecturalBackground:na,useArchitecturalBackground:ra,useForm:la,usePoll:sa}=__STATAMIC__.inertia,{Alert:K,AuthCard:ia,Avatar:da,Badge:$,Button:k,ButtonGroup:ua,Calendar:ca,Card:pa,CardList:ma,CardListItem:ga,CardPanel:va,CharacterCounter:fa,Checkbox:ya,CheckboxGroup:Ca,CodeEditor:Sa,Combobox:ba,CommandPaletteItem:ha,ConfirmationModal:q,Context:ka,ContextFooter:Ta,ContextHeader:wa,ContextItem:xa,ContextLabel:Pa,ContextMenu:Ra,ContextSeparator:Da,CreateForm:La,DatePicker:Aa,DateRangePicker:Va,Description:Ea,DocsCallout:Ma,DragHandle:Ia,Dropdown:Fa,DropdownItem:Ha,DropdownLabel:_a,DropdownMenu:za,DropdownSeparator:Ba,DropdownFooter:Ua,DropdownHeader:Na,Editable:Oa,ErrorMessage:Ga,EmptyStateItem:Ka,EmptyStateMenu:$a,Field:qa,Header:j,Heading:ja,HoverCard:Wa,Icon:Qa,Input:W,InputGroup:Ya,InputGroupAppend:Ja,InputGroupPrepend:Xa,Label:Za,Listing:Q,ListingCustomizeColumns:en,ListingFilters:tn,ListingHeaderCell:on,ListingPagination:an,ListingPresets:nn,ListingPresetTrigger:rn,ListingRowActions:ln,ListingSearch:Y,ListingTable:J,ListingTableBody:sn,ListingTableHead:dn,ListingToggleAll:un,LivePreview:cn,LivePreviewPopout:pn,Modal:mn,ModalClose:gn,ModalTitle:vn,Pagination:fn,Panel:X,PanelFooter:yn,PanelHeader:Cn,Popover:Sn,PublishComponents:bn,PublishContainer:hn,publishContextKey:kn,injectPublishContext:Tn,PublishField:wn,PublishFields:xn,PublishFieldsProvider:Pn,PublishForm:Rn,PublishLocalizations:Dn,PublishSections:Ln,PublishTabs:An,Radio:Vn,RadioGroup:En,Select:Z,Separator:Mn,Slider:In,Skeleton:Fn,SplitterGroup:Hn,SplitterPanel:_n,SplitterResizeHandle:zn,StatusIndicator:Bn,Subheading:Un,Switch:Nn,TabContent:On,Stack:Gn,StackClose:Kn,StackHeader:$n,StackFooter:qn,StackContent:jn,Table:Wn,TableCell:Qn,TableColumn:Yn,TableColumns:Jn,TableRow:Xn,TableRows:Zn,TabList:ee,TabProvider:er,Tabs:te,TabTrigger:oe,Textarea:tr,TimePicker:or,ToggleGroup:ar,ToggleItem:nr,Widget:rr,registerIconSet:lr,registerIconSetFromStrings:sr}=__STATAMIC__.ui,ae={class:"mt-4"},ne={class:"flex items-center justify-between gap-3 min-h-16"},re={key:0,class:"rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-6 text-center text-gray-500"},le={class:"flex items-center gap-2"},V="String Translations",se={__name:"StringTranslations",props:{translations:{type:Array,required:!0},activeLang:{type:String,required:!0},sites:{type:Array,required:!0},saveUrl:{type:String,required:!0},missingTable:{type:Boolean,default:!1}},setup(f){const d=f,E=[{field:"key",label:"Key",sortable:!0},{field:"value",label:"Value"},{field:"actions",label:""}],y=N({}),n=v(new Set),C=v(!1),m=v(!1),g=v("all"),M=[{label:"All",value:"all"},{label:"Untranslated",value:"untranslated"},{label:"Translated",value:"translated"}],I=b(()=>g.value==="untranslated"?d.translations.filter(t=>t.untranslated):g.value==="translated"?d.translations.filter(t=>!t.untranslated):d.translations),F=b(()=>{if(n.value.size>0){const t=n.value.size;return`Save & Delete ${t} key${t===1?"":"s"} (All Locales)`}return"Save"}),T=b({get:()=>d.activeLang,set:t=>A.get(window.location.pathname,{lang:t},{preserveState:!1})});function w(t){(t.key==="Enter"||(t.metaKey||t.ctrlKey)&&t.key==="s")&&(t.preventDefault(),P())}B(()=>document.addEventListener("keydown",w)),U(()=>document.removeEventListener("keydown",w));function x(t){const e=new Set(n.value);if(e.has(t))e.delete(t);else{if(e.size>=100){Statamic.$toast.error("You can only mark up to 100 keys for deletion at once.");return}e.add(t)}n.value=e}function P(){if(n.value.size>0){m.value=!0;return}R()}function R(){m.value=!1,C.value=!0;const t={};for(const e of d.translations)n.value.has(e.key)||(t[e.key]=y[e.key]??e.value);A.post(d.saveUrl,{lang:d.activeLang,strings:t,keys_to_delete:Array.from(n.value).join(",")},{onFinish:()=>{C.value=!1}})}return(t,e)=>(i(),h("div",null,[l(o(G),{title:V}),l(o(j),{title:V},{actions:r(()=>[l(o(k),{variant:n.value.size>0?"danger":"primary",disabled:C.value,onClick:P},{default:r(()=>[p(L(F.value),1)]),_:1},8,["variant","disabled"])]),_:1}),f.missingTable?(i(),c(o(K),{key:0,variant:"warning",class:"mb-4"},{default:r(()=>[...e[3]||(e[3]=[u("p",{class:"font-bold"},"Database table not found",-1),u("p",{class:"text-sm mt-1"},[p(" Run "),u("code",{class:"bg-gray-200 dark:bg-gray-800 px-1 rounded"},"php artisan migrate"),p(" to create the required table. ")],-1)])]),_:1})):D("",!0),l(o(te),{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=s=>T.value=s)},{default:r(()=>[l(o(ee),null,{default:r(()=>[(i(!0),h(_,null,O(f.sites,s=>(i(),c(o(oe),{key:s.handle,name:s.handle,text:s.name},null,8,["name","text"]))),128))]),_:1})]),_:1},8,["modelValue"]),u("div",ae,[l(o(Q),{items:I.value,columns:E,sortColumn:"key",sortDirection:"asc",allowBulkActions:!1,allowCustomizingColumns:!1},{default:r(({items:s,loading:ie})=>[u("div",ne,[l(o(Y)),l(o(Z),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),options:M,class:"w-44"},null,8,["modelValue"])]),s.length?(i(),c(o(X),{key:1},{default:r(()=>[l(o(J),null,{"cell-key":r(({row:a})=>[u("div",le,[u("span",{class:z(["font-mono text-xs",{"line-through opacity-50":n.value.has(a.key)}])},L(a.key),3),a.untranslated?(i(),c(o($),{key:0,color:"amber",size:"sm",text:"Untranslated"})):D("",!0)])]),"cell-value":r(({row:a})=>[l(o(W),{modelValue:y[a.key]??a.value,disabled:n.value.has(a.key),"onUpdate:modelValue":S=>y[a.key]=S},null,8,["modelValue","disabled","onUpdate:modelValue"])]),"cell-actions":r(({row:a})=>[n.value.has(a.key)?(i(),c(o(k),{key:0,size:"sm",onClick:S=>x(a.key)},{default:r(()=>[...e[4]||(e[4]=[p(" Undo ",-1)])]),_:1},8,["onClick"])):(i(),c(o(k),{key:1,variant:"danger",size:"sm",onClick:S=>x(a.key)},{default:r(()=>[...e[5]||(e[5]=[p(" Delete ",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1})):(i(),h("div",re," No results "))]),_:1},8,["items"])]),l(o(q),{open:m.value,"onUpdate:open":e[2]||(e[2]=s=>m.value=s),title:"Delete translation keys",bodyText:`Are you sure you want to delete ${n.value.size} key(s) from ALL locales? This action cannot be undone.`,buttonText:"Delete",danger:"",onConfirm:R},null,8,["open","bodyText"])]))}};Statamic.booting(()=>{Statamic.$inertia.register("string-translations::StringTranslations",se)});
