const F=window.Vue,{BaseTransition:se,BaseTransitionPropsValidators:ie,Comment:de,DeprecationTypes:ue,EffectScope:ce,ErrorCodes:pe,ErrorTypeStrings:me,Fragment:H,KeepAlive:ge,ReactiveEffect:ve,Static:fe,Suspense:ye,Teleport:Ce,Text:Se,TrackOpTypes:be,Transition:he,TransitionGroup:ke,TriggerOpTypes:Te,VueElement:we,__esModule:Pe,assertNumber:xe,callWithAsyncErrorHandling:Re,callWithErrorHandling:De,camelize:Le,capitalize:Ae,cloneVNode:Ve,compatUtils:Ee,compile:Me,computed:b,createApp:Ie,createBlock:c,createCommentVNode:B,createElementBlock:h,createElementVNode:u,createHydrationRenderer:Fe,createPropsRestProxy:He,createRenderer:Be,createSSRApp:_e,createSlots:ze,createStaticVNode:Ue,createTextVNode:p,createVNode:l,customRef:Ne,defineAsyncComponent:Oe,defineComponent:Ge,defineCustomElement:Ke,defineEmits:$e,defineExpose:qe,defineModel:je,defineOptions:We,defineProps:Qe,defineSSRCustomElement:Ye,defineSlots:Je,devtools:Xe,effect:Ze,effectScope:et,getCurrentInstance:tt,getCurrentScope:ot,getCurrentWatcher:nt,getTransitionRawChildren:at,guardReactiveProps:rt,h:lt,handleError:st,hasInjectionContext:it,hydrate:dt,hydrateOnIdle:ut,hydrateOnInteraction:ct,hydrateOnMediaQuery:pt,hydrateOnVisible:mt,initCustomFormatter:gt,initDirectivesForSSR:vt,inject:ft,isMemoSame:yt,isProxy:Ct,isReactive:St,isReadonly:bt,isRef:ht,isRuntimeOnly:kt,isShallow:Tt,isVNode:wt,markRaw:Pt,mergeDefaults:xt,mergeModels:Rt,mergeProps:Dt,nextTick:Lt,nodeOps:At,normalizeClass:_,normalizeProps:Vt,normalizeStyle:Et,onActivated:Mt,onBeforeMount:It,onBeforeUnmount:Ft,onBeforeUpdate:Ht,onDeactivated:Bt,onErrorCaptured:_t,onMounted:z,onRenderTracked:zt,onRenderTriggered:Ut,onScopeDispose:Nt,onServerPrefetch:Ot,onUnmounted:U,onUpdated:Gt,onWatcherCleanup:Kt,openBlock:i,patchProp:$t,popScopeId:qt,provide:jt,proxyRefs:Wt,pushScopeId:Qt,queuePostFlushCb:Yt,reactive:N,readonly:Jt,ref:v,registerRuntimeCompiler:Xt,render:Zt,renderList:O,renderSlot:eo,resolveComponent:to,resolveDirective:oo,resolveDynamicComponent:no,resolveFilter:ao,resolveTransitionHooks:ro,setBlockTracking:lo,setDevtoolsHook:so,setTransitionHooks:io,shallowReactive:uo,shallowReadonly:co,shallowRef:po,ssrContextKey:mo,ssrUtils:go,stop:vo,toDisplayString:D,toHandlerKey:fo,toHandlers:yo,toRaw:Co,toRef:So,toRefs:bo,toValue:ho,transformVNodeArgs:ko,triggerRef:To,unref:o,useAttrs:wo,useCssModule:Po,useCssVars:xo,useHost:Ro,useId:Do,useModel:Lo,useSSRContext:Ao,useShadowRoot:Vo,useSlots:Eo,useTemplateRef:Mo,useTransitionState:Io,vModelCheckbox:Fo,vModelDynamic:Ho,vModelRadio:Bo,vModelSelect:_o,vModelText:zo,vShow:Uo,version:No,warn:Oo,watch:Go,watchEffect:Ko,watchPostEffect:$o,watchSyncEffect:qo,withAsyncContext:jo,withCtx:r,withDefaults:Wo,withDirectives:Qo,withKeys:Yo,withMemo:Jo,withModifiers:Xo,withScopeId:Zo}=F,{Form:en,Head:G,Link:tn,router:L,toggleArchitecturalBackground:on,useArchitecturalBackground:nn,useForm:an,usePoll:rn}=__STATAMIC__.inertia,{Alert:K,AuthCard:ln,Avatar:sn,Badge:dn,Button:k,ButtonGroup:un,Calendar:cn,Card:pn,CardList:mn,CardListItem:gn,CardPanel:vn,CharacterCounter:fn,Checkbox:yn,CheckboxGroup:Cn,CodeEditor:Sn,Combobox:bn,CommandPaletteItem:hn,ConfirmationModal:$,Context:kn,ContextFooter:Tn,ContextHeader:wn,ContextItem:Pn,ContextLabel:xn,ContextMenu:Rn,ContextSeparator:Dn,CreateForm:Ln,DatePicker:An,DateRangePicker:Vn,Description:En,DocsCallout:Mn,DragHandle:In,Dropdown:Fn,DropdownItem:Hn,DropdownLabel:Bn,DropdownMenu:_n,DropdownSeparator:zn,DropdownFooter:Un,DropdownHeader:Nn,Editable:On,ErrorMessage:Gn,EmptyStateItem:Kn,EmptyStateMenu:$n,Field:qn,Header:q,Heading:jn,HoverCard:Wn,Icon:Qn,Input:j,InputGroup:Yn,InputGroupAppend:Jn,InputGroupPrepend:Xn,Label:Zn,Listing:W,ListingCustomizeColumns:ea,ListingFilters:ta,ListingHeaderCell:oa,ListingPagination:na,ListingPresets:aa,ListingPresetTrigger:ra,ListingRowActions:la,ListingSearch:Q,ListingTable:Y,ListingTableBody:sa,ListingTableHead:ia,ListingToggleAll:da,LivePreview:ua,LivePreviewPopout:ca,Modal:pa,ModalClose:ma,ModalTitle:ga,Pagination:va,Panel:J,PanelFooter:fa,PanelHeader:ya,Popover:Ca,PublishComponents:Sa,PublishContainer:ba,publishContextKey:ha,injectPublishContext:ka,PublishField:Ta,PublishFields:wa,PublishFieldsProvider:Pa,PublishForm:xa,PublishLocalizations:Ra,PublishSections:Da,PublishTabs:La,Radio:Aa,RadioGroup:Va,Select:X,Separator:Ea,Slider:Ma,Skeleton:Ia,SplitterGroup:Fa,SplitterPanel:Ha,SplitterResizeHandle:Ba,StatusIndicator:_a,Subheading:za,Switch:Ua,TabContent:Na,Stack:Oa,StackClose:Ga,StackHeader:Ka,StackFooter:$a,StackContent:qa,Table:ja,TableCell:Wa,TableColumn:Qa,TableColumns:Ya,TableRow:Ja,TableRows:Xa,TabList:Z,TabProvider:Za,Tabs:ee,TabTrigger:te,Textarea:er,TimePicker:tr,ToggleGroup:or,ToggleItem:nr,Widget:ar,registerIconSet:rr,registerIconSetFromStrings:lr}=__STATAMIC__.ui,oe={class:"mt-4"},ne={class:"flex items-center justify-between gap-3 min-h-16"},ae={key:0,class:"rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-6 text-center text-gray-500"},A="String Translations",re={__name:"StringTranslations",props:{translations:{type:Array,required:!0},activeLang:{type:String,required:!0},sites:{type:Array,required:!0},saveUrl:{type:String,required:!0},missingTable:{type:Boolean,default:!1}},setup(f){const d=f,V=[{field:"key",label:"Key",sortable:!0},{field:"value",label:"Value"},{field:"actions",label:""}],y=N({}),a=v(new Set),C=v(!1),m=v(!1),g=v("all"),E=[{label:"All",value:"all"},{label:"Untranslated",value:"untranslated"},{label:"Translated",value:"translated"}],M=b(()=>g.value==="untranslated"?d.translations.filter(t=>t.untranslated):g.value==="translated"?d.translations.filter(t=>!t.untranslated):d.translations),I=b(()=>{if(a.value.size>0){const t=a.value.size;return`Save & Delete ${t} key${t===1?"":"s"} (All Locales)`}return"Save"}),T=b({get:()=>d.activeLang,set:t=>L.get(window.location.pathname,{lang:t},{preserveState:!1})});function w(t){(t.key==="Enter"||(t.metaKey||t.ctrlKey)&&t.key==="s")&&(t.preventDefault(),x())}z(()=>document.addEventListener("keydown",w)),U(()=>document.removeEventListener("keydown",w));function P(t){const e=new Set(a.value);if(e.has(t))e.delete(t);else{if(e.size>=100){Statamic.$toast.error("You can only mark up to 100 keys for deletion at once.");return}e.add(t)}a.value=e}function x(){if(a.value.size>0){m.value=!0;return}R()}function R(){m.value=!1,C.value=!0;const t={};for(const e of d.translations)a.value.has(e.key)||(t[e.key]=y[e.key]??e.value);L.post(d.saveUrl,{lang:d.activeLang,strings:t,keys_to_delete:Array.from(a.value).join(",")},{onFinish:()=>{C.value=!1}})}return(t,e)=>(i(),h("div",null,[l(o(G),{title:A}),l(o(q),{title:A},{actions:r(()=>[l(o(k),{variant:a.value.size>0?"danger":"primary",disabled:C.value,onClick:x},{default:r(()=>[p(D(I.value),1)]),_:1},8,["variant","disabled"])]),_:1}),f.missingTable?(i(),c(o(K),{key:0,variant:"warning",class:"mb-4"},{default:r(()=>[...e[3]||(e[3]=[u("p",{class:"font-bold"},"Database table not found",-1),u("p",{class:"text-sm mt-1"},[p(" Run "),u("code",{class:"bg-gray-200 dark:bg-gray-800 px-1 rounded"},"php artisan migrate"),p(" to create the required table. ")],-1)])]),_:1})):B("",!0),l(o(ee),{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=s=>T.value=s)},{default:r(()=>[l(o(Z),null,{default:r(()=>[(i(!0),h(H,null,O(f.sites,s=>(i(),c(o(te),{key:s.handle,name:s.handle,text:s.name},null,8,["name","text"]))),128))]),_:1})]),_:1},8,["modelValue"]),u("div",oe,[l(o(W),{items:M.value,columns:V,sortColumn:"key",sortDirection:"asc",allowBulkActions:!1,allowCustomizingColumns:!1},{default:r(({items:s,loading:le})=>[u("div",ne,[l(o(Q)),l(o(X),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=n=>g.value=n),options:E,class:"w-44"},null,8,["modelValue"])]),s.length?(i(),c(o(J),{key:1},{default:r(()=>[l(o(Y),null,{"cell-key":r(({row:n})=>[u("span",{class:_(["font-mono text-xs",{"line-through opacity-50":a.value.has(n.key)}])},D(n.key),3)]),"cell-value":r(({row:n})=>[l(o(j),{modelValue:y[n.key]??n.value,disabled:a.value.has(n.key),"onUpdate:modelValue":S=>y[n.key]=S},null,8,["modelValue","disabled","onUpdate:modelValue"])]),"cell-actions":r(({row:n})=>[a.value.has(n.key)?(i(),c(o(k),{key:0,size:"sm",onClick:S=>P(n.key)},{default:r(()=>[...e[4]||(e[4]=[p(" Undo ",-1)])]),_:1},8,["onClick"])):(i(),c(o(k),{key:1,variant:"danger",size:"sm",onClick:S=>P(n.key)},{default:r(()=>[...e[5]||(e[5]=[p(" Delete ",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1})):(i(),h("div",ae," No results "))]),_:1},8,["items"])]),l(o($),{open:m.value,"onUpdate:open":e[2]||(e[2]=s=>m.value=s),title:"Delete translation keys",bodyText:`Are you sure you want to delete ${a.value.size} key(s) from ALL locales? This action cannot be undone.`,buttonText:"Delete",danger:"",onConfirm:R},null,8,["open","bodyText"])]))}};Statamic.booting(()=>{Statamic.$inertia.register("string-translations::StringTranslations",re)});
